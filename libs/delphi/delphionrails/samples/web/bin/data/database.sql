SET SQL DIALECT 3;

SET NAMES UTF8;

CREATE DATABASE 'C:\dev\delphionrails\samples\web\bin\data\database.fdb'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 16384
DEFAULT CHARACTER SET UTF8;

CREATE GENERATOR BLOG_ID_GEN;
SET GENERATOR BLOG_ID_GEN TO 23;


CREATE TABLE BLOG (
    ID         INTEGER NOT NULL,
    TITLE      VARCHAR(50) NOT NULL,
    BODY       BLOB SUB_TYPE 1 SEGMENT SIZE 16384,
    POST_DATE  TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

ALTER TABLE BLOG ADD PRIMARY KEY (ID);

CREATE TRIGGER BI_BLOG_ID FOR BLOG
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.ID IS NULL) THEN
      NEW.ID = GEN_ID(BLOG_ID_GEN, 1);
END;
